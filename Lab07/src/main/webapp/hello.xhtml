<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough">
    <h:head>
        <title>Lab07 Lehner-D.</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    </h:head>
    <h:body>
        <div>
            <h:form id="bookform">
                <div>
                    <h:selectOneMenu id="autordropdown" value="#{bookcon.selectedAutor}">
                        <f:selectItem itemValue="#{null}" itemLabel="-- Alle Autoren --"></f:selectItem>
                        <f:selectItems value="#{bookcon.autoren}" 
                                       var="autor"
                                       itemLabel="#{autor}"
                                       itemValue="#{autor}">
                        </f:selectItems>
                        <f:ajax render=":bookform:booktable"/>
                    </h:selectOneMenu>
                </div>
                <div>
                    <h:dataTable id="booktable" value="#{bookcon.books}"
                                 var="book">
                        <h:column>
                            <f:facet name="header">ISBN</f:facet>
                                #{book.isbn}
                        </h:column>
                        <h:column>
                            <f:facet name="header">Titel</f:facet>
                                #{book.titel}
                        </h:column>
                        <h:column>
                            <f:facet name="header">Autor</f:facet>
                                #{book.autor}
                        </h:column>
                        <h:column>
                            <f:facet name="header">Preis</f:facet>
                                #{book.preis}
                        </h:column>

                    </h:dataTable>
                </div>
            </h:form>
        </div>
        <div>
            <h:form id="addform">
                <h:panelGrid columns="3">
                    <h:outputText value="Autor:"/>
                    <h:inputText value="#{bookcon.newbook.autor}"
                                 id="autor"
                                 validatorMessage="Bitte geben Sie einen Autor ein"
                                 a:placeholder="Sir Arthur Conan Doyle">
                        <f:validateRequired/>
                    </h:inputText>
                    <h:message for="autor"/>

                    <h:outputText value="ISBN:"/>
                    <h:inputText value="#{bookcon.newbook.isbn}"
                                 id="isbn"
                                 validatorMessage="Bitte geben Sie eine g端ltige ISBN ein"
                                 a:placeholder="978-0-1406-2361-1">
                        <f:validateRequired/>
                        <f:validator validatorId="isbnvalidator"/>
                    </h:inputText>
                    <h:message for="isbn"/>

                    <h:outputText value="Preis:"/>
                    <h:inputText value="#{bookcon.newbook.preis}"
                                 id="preis"
                                 validatorMessage="Bitte geben Sie einen g端ltigen Preis an"
                                 converterMessage="Bitte geben Sie einen g端ltigen Preis an"
                                 a:placeholder="43.99">
                        <f:validateDoubleRange minimum="0"/>
                        <f:validateRequired/>
                    </h:inputText>
                    <h:message for="preis"/>

                    <h:outputText value="Titel:"/>
                    <h:inputText value="#{bookcon.newbook.titel}"
                                 id="titel"
                                 validatorMessage="Bitte geben Sie einen Buchtitel ein"
                                 a:placeholder="The Hound of the Baskervilles">
                        <f:validateRequired/>
                    </h:inputText>
                    <h:message for="titel"/>
                </h:panelGrid>
                <h:commandButton value="Buch Hinzuf端gen"
                                 action="#{bookcon.createBook}">
                </h:commandButton>
            </h:form>
        </div>
    </h:body>
</html>
